<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CosmicAI - Beyond Intelligence</title>
    <style>
        :root {
            --primary: #6366f1;
            --bg: #0b0e14;
            --panel: #161b22;
            --text: #e6edf3;
            --accent: #00d2ff;
        }

        body {
            margin: 0; font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at center, #1e1b4b 0%, var(--bg) 100%);
            color: var(--text); height: 100vh; display: flex; align-items: center; justify-content: center;
        }

        .cosmic-container {
            width: 95%; max-width: 850px; height: 90vh;
            background: rgba(22, 27, 34, 0.85); backdrop-filter: blur(20px);
            border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 24px;
            display: flex; flex-direction: column; box-shadow: 0 0 60px rgba(0,0,0,0.6);
            overflow: hidden; animation: fadeIn 0.8s ease-out;
        }

        /* Header */
        .header {
            padding: 20px; background: rgba(99, 102, 241, 0.15);
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            text-align: center;
        }
        .header h1 { margin: 0; font-size: 26px; color: var(--accent); letter-spacing: 3px; text-shadow: 0 0 15px var(--accent); }
        .status-text { font-size: 12px; color: #8b949e; margin-top: 5px; }

        /* Chat Window */
        #chat-logs {
            flex: 1; overflow-y: auto; padding: 25px; display: flex; flex-direction: column; gap: 15px;
            scrollbar-width: thin; scrollbar-color: var(--primary) transparent;
        }

        .bubble { padding: 14px 20px; border-radius: 20px; max-width: 75%; line-height: 1.6; font-size: 15px; animation: pop 0.3s ease; }
        .user { align-self: flex-end; background: linear-gradient(135deg, var(--primary), #4f46e5); color: white; border-bottom-right-radius: 4px; }
        .bot { align-self: flex-start; background: var(--panel); border: 1px solid #30363d; border-bottom-left-radius: 4px; }

        /* Controls */
        .input-area {
            padding: 20px; background: var(--panel); border-top: 1px solid #30363d;
            display: flex; gap: 10px; align-items: center;
        }
        input {
            flex: 1; background: #0d1117; border: 1px solid #30363d; border-radius: 15px;
            padding: 15px; color: white; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--accent); }

        .btn {
            background: var(--primary); color: white; border: none; padding: 15px 25px;
            border-radius: 15px; cursor: pointer; font-weight: bold; transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); }
        .mic-btn { background: transparent; border: 2px solid var(--primary); color: var(--primary); padding: 12px; }
        .mic-active { background: #ef4444; border-color: #ef4444; color: white; animation: pulse 1.5s infinite; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
    </style>
</head>
<body>

<div class="cosmic-container">
    <div class="header">
        <h1>COSMIC AI</h1>
        <div class="status-text">âœ¦ Advanced Neural Network Active âœ¦</div>
    </div>

    <div id="chat-logs">
        <div class="bubble bot">Greetings. I am <b>CosmicAI</b>. I am ready to explore the depths of your queries. How can I assist you today?</div>
    </div>

    <div id="typing" style="display: none; padding-left: 25px; color: var(--accent); font-size: 13px; margin-bottom: 10px;">CosmicAI is processing...</div>

    <div class="input-area">
        <button id="micBtn" class="btn mic-btn" title="Voice Input">ðŸŽ¤</button>
        <input type="text" id="userInput" placeholder="Transmit your message..." autocomplete="off">
        <button class="btn" onclick="process()">SEND</button>
    </div>
</div>

<script>
    const KEY = "AIzaSyDCN3_wOo5vk59csxNdtKJMLVtkots7U_c";
    let history = [];

    // --- Voice Recognition Setup ---
    const micBtn = document.getElementById('micBtn');
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    
    if (SpeechRecognition) {
        const recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.lang = 'en-US';

        micBtn.onclick = () => {
            recognition.start();
            micBtn.classList.add('mic-active');
        };

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            document.getElementById('userInput').value = transcript;
            micBtn.classList.remove('mic-active');
            process();
        };

        recognition.onerror = () => micBtn.classList.remove('mic-active');
        recognition.onend = () => micBtn.classList.remove('mic-active');
    } else {
        micBtn.style.display = 'none';
    }

    // --- Core Logic ---
    async function process() {
        const inp = document.getElementById("userInput");
        const val = inp.value.trim();
        if (!val) return;

        addMsg("You", val, "user");
        inp.value = "";
        
        history.push({"role": "user", "parts": [{"text": val}]});
        document.getElementById("typing").style.display = "block";

        try {
            // Humne Gemini ka naam URL se nahi hataya kyunki wo API endpoint hai, magar UI mein kahi zikr nahi hoga.
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ "contents": history })
            });

            const data = await res.json();
            const reply = data.candidates[0].content.parts[0].text;

            // CosmicAI identity reinforcement
            const filteredReply = reply.replace(/Gemini/g, "CosmicAI").replace(/Google/g, "Cosmic Core");

            history.push({"role": "model", "parts": [{"text": filteredReply}]});
            addMsg("CosmicAI", filteredReply, "bot");
        } catch (e) {
            addMsg("System", "Cosmic Interference detected. Signal lost.", "bot");
        } finally {
            document.getElementById("typing").style.display = "none";
        }
    }

    function addMsg(s, t, c) {
        const logs = document.getElementById("chat-logs");
        const div = document.createElement("div");
        div.className = `bubble ${c}`;
        div.innerHTML = `<b>${s}:</b><br>${t.replace(/\n/g, '<br>')}`;
        logs.appendChild(div);
        logs.scrollTop = logs.scrollHeight;
    }

    document.getElementById("userInput").addEventListener("keypress", (e) => {
        if (e.key === "Enter") process();
    });
</script>

</body>
</html>

